pkgname=python-proxy
pkgver=20200903.r158.0aa4e4c
pkgrel=1
pkgdesc="HTTP/Socks4/Socks5/Shadowsocks/ShadowsocksR/SSH/Redirect/Pf TCP/UDP asynchronous tunnel proxy implemented in Python3 asyncio."
arch=('any')
url="https://github.com/qwj/python-proxy"
license=('MIT')
depends=('python-pycryptodome' 'python-uvloop')
makedepends=('python-setuptools')
source=("$pkgname::git+https://github.com/qwj/python-proxy.git")
md5sums=('SKIP')

pkgver()
{
    cd "$srcdir"/$pkgname
    printf "%s.r%s.%s" "$(date +'%Y%m%d')" "$(git rev-list --count HEAD)" "$(git rev-parse --short HEAD)"
}

package()
{
    cd "$srcdir"/$pkgname
    python setup.py install --root="$pkgdir" --optimize=1
}
